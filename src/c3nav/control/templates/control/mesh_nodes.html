{% extends 'control/base.html' %}
{% load i18n %}

{% block heading %}{% trans 'Mesh' %}{% endblock %}

{% block subcontent %}
    <table>
        <tr>
            <th>{% trans 'Node' %}</th>
            <th>{% trans 'Status' %}</th>
            <th>{% trans 'Chip' %}</th>
            <th>{% trans 'Firmware' %}</th>
            <th>{% trans 'Last msg' %}</th>
            <th>{% trans 'Parent' %}</th>
            <th>{% trans 'Route' %}</th>
        </tr>
        {% for node in nodes %}
            <tr>
                <td>
                    {% if node.route %}
                        <span style="color: green;">{% trans "online" %}</span>
                    {% else %}
                        <span style="color: red;">{% trans "offline" %}</span>
                    {% endif %}
                </td>
                <td>{{ node }}</td>
                <td>
                    {{ node.last_messages.CONFIG_FIRMWARE.parsed.get_chip_display }}
                    rev{{ node.last_messages.CONFIG_FIRMWARE.parsed.revision|join:"." }}
                </td>
                <td>
                    {{ node.last_messages.CONFIG_FIRMWARE.parsed.version }}
                    (IDF {{ node.last_messages.CONFIG_FIRMWARE.parsed.idf_version }})
                </td>
                <td>
                    {% blocktrans trimmed with timesince=node.last_msg|timesince %}
                        {{ timesince }} ago
                    {% endblocktrans %}
                </td>
                <td>{{ node.parent }}</td>
                <td>{{ node.route }}</td>
                <td>{{ node.last_messages.CONFIG_FIRMWARE.data }}</td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}
